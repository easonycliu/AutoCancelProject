# Intro
Here is Atropos's Java experiments.

# Setup
Before starting, make sure your working dir is under ${Atropos}/scripts/cases, otherwise, please `cd scripts/cases`.

First, we will prepare JDK-17, docker and some utilities.

```
./setup_env.sh
```

Even if there is existing JDK, try using our provided version of JDK.
JDK-8 is known to failed in compile Elasticsearch.

Second, we will compile Elasticsearc and Solr.

```
./compile_es.sh
./compile_solr.sh
```

Third, we will setup query for testing, which is automatically generated by scripts.

```
./setup_query.sh
```

Forth, we will download data the same we used in the paper for Elasticsearch and Solr to ensure the reproducability.

```
./download_data.sh
```

This step probably fails because of expired GFP token used in the script.
In this case, please contact easonycliu using this email address to ask him to update token: easonycliu@ucla.edu

Finally, setup image for some benchmarks use.

```
./setup_image.sh
```

# Run experiment
All the experiments uses the same logic to run.
There will be a script under each case from case 1 to case 7 here.
For example, if want to run case 1.

```
cd c1_cache_evict
./launch.sh
```

The all related main experiments for case 1 start sequentially.
After finishing, check result in ${Atropos}/scripts/logs/${START\_DATE}/${CASE}\_${START\_TIME}

Running remain kinds of experiments are the same as main experiments.
For example, to compare the performance with baselines, there will still be a `launch.sh` under each baseline in ${Atropos}/scripts/baseline
And for microbenchmark, there will also be a executable file under each microbenchmark in ${Atropos}/scripts/microbenchmark
